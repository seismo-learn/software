taup_setsac
===========

:doc:`taup_time` 命令可以计算各震相的理论走时，
:doc:`taup_setsac` 命令则用于计算理论走时并将走时信息写入到 SAC 文件头段中。

使用 ``taup_setsac --help`` 可查询该命令的完整用法和选项。

其用法很简单，示例如下::

   $ taup_setsac -mod prem -ph P-0,S-1,PcP-8,ScS-9 -evdpkm *.SAC

-  ``-mod`` 指定使用 PREM 模型
-  ``-ph P-0,S-1,PcP-8,ScS-9`` 将 P 波到时标记到 SAC 头段 ``T0`` 中，
   S 到时标记到 ``T1`` 中，PcP 标记到 ``T8``，ScS 标记到 ``T9``。
-  ``-evdpkm``\ ：由于历史原因，该命令默认 SAC 文件中的震源深度单位为米，
   而现在的 SAC 文件中的震源深度单位为千米。该选项设置深度的单位为 km

该命令在将震相走时标记到头段变量 ``Tn`` 的同时，还会修改对应的 ``KTn`` 和 ``USERn``，
其中 ``KTn`` 中保存震相名，``USERn`` 中保存震相的射线参数（单位为s/radian）。

.. note::

   若执行命令时经常会忘记指定 ``-evdpkm`` 选项，此时该命令会给出警告。
   需要注意，一定不要按 :kbd:`Ctrl+C` 终止执行命令。

   因为 ``taup_setsac`` 需要将 SAC 文件读入内存，进行修改，再将内存中的数据
   写回磁盘覆盖原文件。使用 :kbd:`Ctrl+C` 终止命令会导致文件写回磁盘失败，
   进而导致部分 SAC 文件损坏。

   正确的做法是不理会这些警告，待程序执行完毕之后再加上``-evdpkm`` 选项重新执行。
